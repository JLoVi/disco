<template id="cue">
  <style>
   div.cue {
     border: 2px solid #888;
     min-height: 30px;
     min-width: 80px;
   }

   ul {
     list-style: none;
   }
  </style>

  <div class="cue">
    <ul>
      <li>
	<strong>Id:</strong>
	<div id="id">
	  <content select="p.id"></content>
	</div>
      </li>
      <li>
	<strong>Name:</strong>
	<div contenteditable="true" id="name">
	  <content select="p.name"></content>
	</div>
      </li>
      <li>
	<button id="play">Play</button>
      </li>
    </ul>
  </div>
</template>

<script>
 // use a clojure so as to not overwrite global values
 (function() {
    // IMPORT DOM 
    var importDoc = document.currentScript.ownerDocument;

    // PARENT DOM 
    var parentDoc = document;

    var XComponent = document.registerElement('iris-cue', {
      prototype: Object.create(HTMLElement.prototype, {
        // Element initializer
        createdCallback: {
          value: function() {
            this.root = this.createShadowRoot();
            var template = importDoc.querySelector('template#cue');
            var clone = importDoc.importNode(template.content, true);
            this.root.appendChild(clone);
          
            this.root
      	      .querySelector('#play')
      	      .addEventListener('click', (function() {
		this.trigger('play', this.root.querySelector('div#id').innerHTML);
	      }).bind(this));
	  }
	},
        
        // Element attached to DOM
        attachedCallback: {
          value: function() {
          
          }
        },
        
        // Element is detached (removed from DOM)
        detachedCallback: {
          value: function() {
          
          }
        },
        
        trigger: {
          value: function(event, data) {
            var event = new CustomEvent(event, { data: data });
            this.dispatchEvent(event);
          }
        }
      })
    });
 })();

</script>
